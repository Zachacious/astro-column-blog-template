---
import '../css/blogcard.scss';

import formatDate from '../utils/FormatDate';

const { post } = Astro.props;

const categoryEl = post.frontmatter.category
  ? `<small class="rounded-lg p-1 px-2 z-0 opacity-80">${post.frontmatter.category}</small> `
  : null;

const style = post.frontmatter.imgSrc
  ? `background: url(${post.frontmatter.imgSrc})`
  : '';
---

<div
  class="blog-card relative m-5 flex cursor-pointer flex-col rounded-md bg-secondarydark bg-cover bg-center p-2 drop-shadow-lg "
  style={style}
  onclick={`window.location.href='${post.url}'`}
>
  <div class="blog-card__overlay absolute bg-primarydark"></div>
  <div class="blog-card__header z-0 rounded-t-md px-3">
    <h2 class="text-2xl font-bold">{post.frontmatter.title}</h2>
    <div class="w-full opacity-70">
      <small>{formatDate(post.frontmatter.pubDate)}</small>
    </div>
  </div>
  <div class="z-0 grow overflow-hidden p-3">
    <div class="blog-card__desc ">
      {post.frontmatter.description}
    </div>
  </div>
  <div class="z-0 flex w-full justify-start p-3">
    <span>
      <!-- <Fragment set:html="categoryEl" /> -->
      {post?.frontmatter?.tags?.map((tag) => (
        <small class="z-0 m-1 rounded-lg border p-1 px-2 opacity-80">
          {post.frontmatter.category}
        </small>
      ))}
    </span>
    <!-- <small class="font-bold">...Continue</small> -->
  </div>
</div>
